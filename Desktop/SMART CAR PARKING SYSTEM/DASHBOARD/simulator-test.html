<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulator Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
</head>
<body class="bg-black text-white p-8">
    <h1 class="text-2xl mb-4">Firebase Connection Test</h1>
    <div id="status">Testing Firebase connection...</div>
    <div id="logs" class="mt-4 space-y-2"></div>

    <script src="firebase-config.js"></script>
    <script>
        function log(message) {
            const logs = document.getElementById('logs');
            const div = document.createElement('div');
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            logs.appendChild(div);
            console.log(message);
        }

        async function testFirebase() {
            try {
                log('Testing Firebase initialization...');
                
                log('Testing Firestore connection...');
                const testDoc = await db.collection('test').doc('connection').get();
                log('Firestore connection successful!');
                
                log('Testing write permission...');
                await db.collection('test').doc('connection').set({
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    message: 'Connection test successful'
                });
                log('Write permission successful!');
                
                document.getElementById('status').textContent = '✅ Firebase connection working!';
                document.getElementById('status').className = 'text-green-400';
                
            } catch (error) {
                log('❌ Error: ' + error.message);
                document.getElementById('status').textContent = '❌ Firebase connection failed: ' + error.message;
                document.getElementById('status').className = 'text-red-400';
            }
        }

        // Start test when page loads
        document.addEventListener('DOMContentLoaded', testFirebase);
    </script>
</body>
</html>
